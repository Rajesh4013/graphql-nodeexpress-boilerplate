generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Media {
  media_id          String                   @id @unique @default(uuid())
  title             String
  status            String
  media_type        String
  duration          Int
  publish_date      DateTime?
  tags              String[]                 @default([])
  custom_parameters Json                     @default("{}")
  created_at        DateTime                 @default(now())
  updated_at        DateTime?                @updatedAt
  searchable        Unsupported("tsvector")?

  @@index([custom_parameters], map: "idx_media_custom_parameters_gin", type: Gin)
  @@index([tags], map: "idx_media_tags_gin", type: Gin)
  @@index([searchable], map: "searchable_media_idx", type: Gin)
}

model Playlist {
  playlist_id       String    @id @unique @default(uuid())
  title             String
  type              String?
  media_id          String[]  @default([])
  description       String?
  custom_parameters Json      @default("{}")
  playlist_config   Json      @default("{}")
  created_at        DateTime  @default(now())
  updated_at        DateTime? @updatedAt

  @@index([media_id], map: "playlist_media_id_idx_gin", type: Gin)
  @@index([playlist_config], map: "playlist_config_idx", type: Gin)
  @@index([custom_parameters], map: "playlist_custom_parameters_idx", type: Gin)
}
